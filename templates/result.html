{% extends "base.html" %}
{% block content %}

<section id="results" class="col-4 offset-4 mt-5">
    <h1>Results</h1>
    <h4>Can {{ user_gpu_name}} run {{ user_game_name }}?</h4>
    <br>
    <h5><strong>PC Minimum Requirements</strong></h5>
    {{ steam|safe }}
    <br>
    <div class="boder-navy p-3">
    <p><strong>User GPU:</strong> {{ user_gpu_name}} </p>
    <p><strong>Game Name: </strong> {{ user_game_name }}</p>
    <p><strong>Game ID: </strong> {{ user_game_id }} </p>
    <p><strong> Can I run it? </strong>{{ info_message }}</p>
        {% if gpu_in_database %}
            {% if gpu_in_database.games %}
                {% for game in gpu_in_database.games %}
                    {% if game["name"] == user_game_name %}
                        <strong>Average user FPS:</strong>
                        {% if game["userfps"] %}
                            {% set sum = namespace(value=0) %}
                            {% set denominator = namespace(value=0) %}
                            {% set averageFps = namespace(value=0) %}

                            {% for object in game["userfps"] %}
                                {% set sum.value = sum.value + object.fps %}
                                {% set denominator.value = denominator.value + 1 %}
                            {% endfor %}
                            
                            {% set averageFps.value = sum.value / denominator.value %}
                            {{ averageFps.value|round(1, 'floor')|int}}
                        {% endif %}
                    {% endif %}
                {% endfor %}
    
            {% endif %}
        {% endif %}
    </div>
    
</section>
{% endblock %}
{% block postloadjs %}
<script src="{{ url_for('static', filename='js/reset_index.js') }}"></script>
<script src="{{ url_for('static', filename='js/reset_profile_page_variable.js') }}"></script>
{% endblock %}